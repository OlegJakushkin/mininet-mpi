language: python
os: linux
dist: bionic
python: 3.8
      
services:
  - docker
  
install:
# Update packages
- sudo apt-get update

# Install tool for visualization
- pip install matplotlib

jobs:
  include:
    - name: "Mpi modeling on fattree topology"
      script:
        - . build.sh
        - echo "Run from $PWD"
        - docker build -t containernet/containernet:ubuntu .
        - docker run —name containernet -it —rm —privileged —pid='host' -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/docker/volumes:/var/lib/docker/volumes containernet/containernet:ubuntu ./mininet-mpi/start.sh fattree
      
    - name: "Mpi modeling on dragonfly topology"
      script:
        - . build.sh
        - echo "Run from $PWD"
        - docker build -t containernet/containernet:ubuntu .
        - docker run —name containernet -it —rm —privileged —pid='host' -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/docker/volumes:/var/lib/docker/volumes containernet/containernet:ubuntu ./mininet-mpi/start.sh dragonfly
